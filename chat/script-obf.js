const _0x59172f=_0x32c6;(function(_0x48b2cc,_0x5cd34f){const _0x331b84=_0x32c6,_0x24f60d=_0x48b2cc();while(!![]){try{const _0x36933c=parseInt(_0x331b84(0x15b))/0x1*(parseInt(_0x331b84(0x170))/0x2)+-parseInt(_0x331b84(0x16b))/0x3+parseInt(_0x331b84(0x129))/0x4+-parseInt(_0x331b84(0x14c))/0x5+-parseInt(_0x331b84(0x142))/0x6+parseInt(_0x331b84(0x13c))/0x7+parseInt(_0x331b84(0x15d))/0x8;if(_0x36933c===_0x5cd34f)break;else _0x24f60d['push'](_0x24f60d['shift']());}catch(_0x205093){_0x24f60d['push'](_0x24f60d['shift']());}}}(_0xa443,0xb8f97));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js';import{getFirestore,collection,addDoc,onSnapshot,orderBy,query,setDoc,doc,getDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore.js';const firebaseConfig={'apiKey':'AIzaSyA9e5O-C0KvwIGZuZ6IFjoEKUwTW1Jl8o4','authDomain':_0x59172f(0x175),'projectId':_0x59172f(0x13b),'storageBucket':_0x59172f(0x12f),'messagingSenderId':_0x59172f(0x119),'appId':_0x59172f(0x176)},app=initializeApp(firebaseConfig),db=getFirestore(app),chatMessages=document[_0x59172f(0x15f)](_0x59172f(0x14e)),chatInput=document[_0x59172f(0x15f)](_0x59172f(0x166)),sendBtn=document[_0x59172f(0x15f)]('send-btn'),username=localStorage['getItem']('username');!username&&(window[_0x59172f(0x140)][_0x59172f(0x146)]='../');const messagesRef=collection(db,'messages'),q=query(messagesRef,orderBy(_0x59172f(0x136)));function requestNotificationPermission(){const _0xc602bb=_0x59172f;Notification['permission']===_0xc602bb(0x134)&&Notification[_0xc602bb(0x135)]()['then'](_0x417e68=>{const _0x33d8c2=_0xc602bb;_0x417e68===_0x33d8c2(0x113)?(console[_0x33d8c2(0x11c)](_0x33d8c2(0x11d)),!localStorage[_0x33d8c2(0x149)](_0x33d8c2(0x15e))&&(alert(_0x33d8c2(0x177)),localStorage['setItem'](_0x33d8c2(0x15e),_0x33d8c2(0x158)))):console[_0x33d8c2(0x11c)](_0x33d8c2(0x154));});}function sendNotification(_0x848353){const _0x25cf75=_0x59172f;Notification[_0x25cf75(0x178)]===_0x25cf75(0x113)&&new Notification(_0x848353['username']+_0x25cf75(0x125),{'body':_0x848353['text'],'icon':'../assets/icon.png'});}function _0xa443(){const _0x36e624=['remove','porters-gc.firebaseapp.com','1:333509559336:web:1541f98d3eeaa6d3a1e11d','Notifications\x20may\x20sometimes\x20cause\x20issues.\x20If\x20you\x20experience\x20problems\x20with\x20notifications,\x20please\x20go\x20to\x20chrome://settings/content/notifications,\x20find\x20this\x20site,\x20and\x20disable\x20notifications.','permission','lastActive','click','preventDefault','Error\x20deleting\x20message:','absolute','granted','exists','value','online','position','close-popup','333509559336','.popup-menu','trim','log','Notification\x20permission\x20granted.','border','1000','classList','status','#fff','querySelector','.user-message','\x20sent\x20a\x20new\x20message!','messageId','borderRadius','add','1127168ZHrmKI','addEventListener','status-popup','zIndex','error','innerHTML','porters-gc.firebasestorage.app','5px','username','dataset','toMillis','default','requestPermission','timestamp','beforeunload','toLocaleString','users','boxShadow','porters-gc','4414417BcCYaH','background','tagName','text','location','top','7820664Voxeav','display','5px\x2010px','color','href','pointer','left','getItem','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','closest','582340BYZhes','data','chat-messages','cursor','#ff5555','popup-menu','flex','scrollHeight','Notification\x20permission\x20denied.','target','\x20was\x20last\x20online\x20on\x20','clientX','true','message','status-message','7951ifYGwr','scrollTop','20551608SZpaYg','notificationAlertShown','getElementById','none','div','messages','contextmenu','Delete','other-message','chat-input','padding','toDate','createElement','Message\x20deleted.','4531599uTSRne','appendChild','style','textContent','span','52HVXfTp','offline','SPAN','clientY'];_0xa443=function(){return _0x36e624;};return _0xa443();}function _0x32c6(_0x2f650e,_0x2e17b1){const _0xa44343=_0xa443();return _0x32c6=function(_0x32c658,_0x3902d0){_0x32c658=_0x32c658-0x10e;let _0x125cb3=_0xa44343[_0x32c658];return _0x125cb3;},_0x32c6(_0x2f650e,_0x2e17b1);}onSnapshot(q,_0x5c7bcc=>{const _0x430004=_0x59172f;chatMessages[_0x430004(0x12e)]='',_0x5c7bcc['forEach'](_0x133ad9=>{const _0xe18584=_0x430004,_0x4db5df=_0x133ad9[_0xe18584(0x14d)](),_0x41776a=_0x133ad9['id'],_0x234de9=_0x4db5df[_0xe18584(0x136)][_0xe18584(0x133)](),_0x285b94=document['createElement'](_0xe18584(0x161)),_0x553e08=document[_0xe18584(0x169)](_0xe18584(0x16f));_0x553e08['textContent']=_0x4db5df['username'],_0x553e08[_0xe18584(0x120)][_0xe18584(0x128)]('username'),_0x285b94[_0xe18584(0x16c)](_0x553e08);const _0x4ed672=document[_0xe18584(0x169)](_0xe18584(0x16f));_0x4ed672[_0xe18584(0x16e)]=':\x20'+_0x4db5df[_0xe18584(0x13f)],_0x285b94[_0xe18584(0x16c)](_0x4ed672),_0x4db5df['username']===username?(_0x285b94[_0xe18584(0x120)]['add']('user-message'),_0x285b94[_0xe18584(0x132)][_0xe18584(0x126)]=_0x41776a):_0x285b94[_0xe18584(0x120)][_0xe18584(0x128)](_0xe18584(0x165)),chatMessages[_0xe18584(0x16c)](_0x285b94),_0x4db5df[_0xe18584(0x131)]!==username&&sendNotification(_0x4db5df);}),chatMessages[_0x430004(0x15c)]=chatMessages[_0x430004(0x153)];}),chatMessages[_0x59172f(0x12a)](_0x59172f(0x163),_0x26c937=>{const _0x1d20ae=_0x59172f;_0x26c937[_0x1d20ae(0x110)]();const _0x45f278=document[_0x1d20ae(0x123)](_0x1d20ae(0x11a));if(_0x45f278)_0x45f278[_0x1d20ae(0x174)]();const _0x328d7a=_0x26c937[_0x1d20ae(0x155)][_0x1d20ae(0x14b)](_0x1d20ae(0x124));if(!_0x328d7a)return;const _0x462e40=document[_0x1d20ae(0x169)](_0x1d20ae(0x161));_0x462e40['classList']['add'](_0x1d20ae(0x151)),_0x462e40[_0x1d20ae(0x16d)][_0x1d20ae(0x117)]=_0x1d20ae(0x112),_0x462e40[_0x1d20ae(0x16d)][_0x1d20ae(0x141)]=_0x26c937[_0x1d20ae(0x173)]+'px',_0x462e40[_0x1d20ae(0x16d)][_0x1d20ae(0x148)]=_0x26c937[_0x1d20ae(0x157)]+'px',_0x462e40[_0x1d20ae(0x16d)]['background']='#333',_0x462e40[_0x1d20ae(0x16d)][_0x1d20ae(0x145)]=_0x1d20ae(0x122),_0x462e40[_0x1d20ae(0x16d)][_0x1d20ae(0x167)]='10px',_0x462e40['style'][_0x1d20ae(0x127)]=_0x1d20ae(0x130),_0x462e40['style'][_0x1d20ae(0x13a)]='0\x202px\x205px\x20rgba(0,\x200,\x200,\x200.3)',_0x462e40['style'][_0x1d20ae(0x12c)]=_0x1d20ae(0x11f);const _0x3e306d=document[_0x1d20ae(0x169)]('button');_0x3e306d[_0x1d20ae(0x16e)]=_0x1d20ae(0x164),_0x3e306d[_0x1d20ae(0x16d)][_0x1d20ae(0x13d)]=_0x1d20ae(0x150),_0x3e306d[_0x1d20ae(0x16d)][_0x1d20ae(0x145)]=_0x1d20ae(0x122),_0x3e306d[_0x1d20ae(0x16d)][_0x1d20ae(0x11e)]=_0x1d20ae(0x160),_0x3e306d[_0x1d20ae(0x16d)]['padding']=_0x1d20ae(0x144),_0x3e306d[_0x1d20ae(0x16d)][_0x1d20ae(0x14f)]=_0x1d20ae(0x147),_0x3e306d[_0x1d20ae(0x16d)][_0x1d20ae(0x127)]='3px',_0x462e40[_0x1d20ae(0x16c)](_0x3e306d),document['body'][_0x1d20ae(0x16c)](_0x462e40),_0x3e306d[_0x1d20ae(0x12a)](_0x1d20ae(0x10f),async()=>{const _0x511482=_0x1d20ae,_0x457c2e=confirm(_0x511482(0x14a));if(_0x457c2e){const _0x3feaf4=_0x328d7a[_0x511482(0x132)]['messageId'];try{await deleteDoc(doc(db,_0x511482(0x162),_0x3feaf4)),alert(_0x511482(0x16a));}catch(_0x51edc3){console[_0x511482(0x12d)](_0x511482(0x111),_0x51edc3[_0x511482(0x159)]),alert('Failed\x20to\x20delete\x20message.\x20Error:\x20'+_0x51edc3[_0x511482(0x159)]);}}_0x462e40[_0x511482(0x174)]();}),window['addEventListener'](_0x1d20ae(0x10f),()=>{const _0x1692a1=_0x1d20ae;_0x462e40[_0x1692a1(0x174)]();},{'once':!![]});}),sendBtn[_0x59172f(0x12a)](_0x59172f(0x10f),async()=>{const _0x5c4b8d=_0x59172f,_0x3096e8=chatInput[_0x5c4b8d(0x115)]['trim']();_0x3096e8&&(await addDoc(messagesRef,{'username':username,'text':_0x3096e8,'timestamp':new Date()}),chatInput[_0x5c4b8d(0x115)]='');});function updateUserStatus(_0x1fca88,_0x5e0293){const _0x2c260c=_0x59172f,_0xe38fcf=doc(db,'users',_0x1fca88);setDoc(_0xe38fcf,{'username':_0x1fca88,'status':_0x5e0293,'lastActive':_0x5e0293===_0x2c260c(0x171)?new Date():null},{'merge':!![]});}window[_0x59172f(0x12a)](_0x59172f(0x137),()=>{const _0x541142=_0x59172f;updateUserStatus(username,_0x541142(0x171));});async function checkUserStatus(_0x5289c1){const _0x9c2359=_0x59172f,_0x22fb48=doc(db,_0x9c2359(0x139),_0x5289c1),_0x4326c3=await getDoc(_0x22fb48),_0x5542d3=document[_0x9c2359(0x15f)](_0x9c2359(0x12b)),_0xfa139=document[_0x9c2359(0x15f)](_0x9c2359(0x15a));if(_0x4326c3[_0x9c2359(0x114)]()){const _0x4cc13f=_0x4326c3[_0x9c2359(0x14d)](),_0x318abc=_0x4cc13f[_0x9c2359(0x121)]===_0x9c2359(0x116)?_0x5289c1+'\x20is\x20currently\x20online':_0x5289c1+_0x9c2359(0x156)+_0x4cc13f[_0x9c2359(0x10e)][_0x9c2359(0x168)]()[_0x9c2359(0x138)]();_0xfa139[_0x9c2359(0x16e)]=_0x318abc;}else _0xfa139[_0x9c2359(0x16e)]=_0x5289c1+'\x20is\x20not\x20found.';_0x5542d3[_0x9c2359(0x16d)]['display']=_0x9c2359(0x152);}document[_0x59172f(0x15f)](_0x59172f(0x118))[_0x59172f(0x12a)](_0x59172f(0x10f),()=>{const _0x570e2d=_0x59172f;document['getElementById'](_0x570e2d(0x12b))['style'][_0x570e2d(0x143)]=_0x570e2d(0x160);}),window[_0x59172f(0x12a)](_0x59172f(0x10f),_0x12f627=>{const _0x3bd092=_0x59172f,_0xfe9871=document[_0x3bd092(0x15f)](_0x3bd092(0x12b));_0x12f627[_0x3bd092(0x155)]===_0xfe9871&&(_0xfe9871[_0x3bd092(0x16d)][_0x3bd092(0x143)]=_0x3bd092(0x160));}),chatMessages[_0x59172f(0x12a)](_0x59172f(0x10f),_0x55565c=>{const _0x24072b=_0x59172f,_0x1a4c9b=_0x55565c[_0x24072b(0x155)];if(_0x1a4c9b[_0x24072b(0x13e)]===_0x24072b(0x172)&&_0x1a4c9b[_0x24072b(0x120)]['contains']('username')){const _0x4cae16=_0x1a4c9b[_0x24072b(0x16e)][_0x24072b(0x11b)]();checkUserStatus(_0x4cae16);}}),requestNotificationPermission(),updateUserStatus(username,_0x59172f(0x116));