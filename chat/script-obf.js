const _0x42da12=_0x3679;(function(_0x265486,_0x11c0f5){const _0x517fdb=_0x3679,_0x14ff36=_0x265486();while(!![]){try{const _0x253d89=-parseInt(_0x517fdb(0x196))/0x1*(-parseInt(_0x517fdb(0x1d2))/0x2)+-parseInt(_0x517fdb(0x1b4))/0x3*(-parseInt(_0x517fdb(0x1c0))/0x4)+-parseInt(_0x517fdb(0x178))/0x5+-parseInt(_0x517fdb(0x1bb))/0x6+parseInt(_0x517fdb(0x1c9))/0x7*(-parseInt(_0x517fdb(0x1ad))/0x8)+-parseInt(_0x517fdb(0x17a))/0x9*(-parseInt(_0x517fdb(0x1ab))/0xa)+-parseInt(_0x517fdb(0x1bd))/0xb*(-parseInt(_0x517fdb(0x184))/0xc);if(_0x253d89===_0x11c0f5)break;else _0x14ff36['push'](_0x14ff36['shift']());}catch(_0xba4f26){_0x14ff36['push'](_0x14ff36['shift']());}}}(_0x31e2,0x73f31));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js';import{getFirestore,collection,addDoc,onSnapshot,orderBy,query,setDoc,doc,getDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore.js';function _0x3679(_0x50a2f5,_0x1c86db){const _0x31e24d=_0x31e2();return _0x3679=function(_0x3679ec,_0x3fc408){_0x3679ec=_0x3679ec-0x170;let _0x195384=_0x31e24d[_0x3679ec];return _0x195384;},_0x3679(_0x50a2f5,_0x1c86db);}function _0x31e2(){const _0x12023b=['appendChild','target','remove','52241xHEaqE','then','SPAN','Error\x20deleting\x20message:','innerHTML','permission','popup-menu','#fff','.popup-menu','24XSovDt','exists','createElement','messageId','add','Notification\x20permission\x20denied.','1000','timestamp','absolute','classList','getElementById','send-btn','Failed\x20to\x20delete\x20message.\x20Error:\x20','boxShadow','users','notificationAlertShown','contextmenu','forEach','clientX','Notification\x20permission\x20granted.','log','close-popup','addEventListener','preventDefault','Error\x20loading\x20profanity\x20filter:','2471575BWRyMR','text','2868084TMjOrz','none','./data/profanity-filter.json','true','scrollHeight','textContent','granted','error','borderRadius','0\x202px\x205px\x20rgba(0,\x200,\x200,\x200.3)','2449284rZyHNG','3px','AIzaSyA9e5O-C0KvwIGZuZ6IFjoEKUwTW1Jl8o4','../assets/icon.png','user-message','status-message','dataset','click','../','1:333509559336:web:1541f98d3eeaa6d3a1e11d','data','flex','trim','\x20sent\x20a\x20new\x20message!','zIndex','requestPermission','10px','style','22097jVfrrT','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20message?','5px\x2010px','Delete','span','href','porters-gc','\x20is\x20currently\x20online','other-message','status-popup','pointer','toMillis','Notifications\x20may\x20sometimes\x20cause\x20issues.\x20If\x20you\x20experience\x20problems\x20with\x20notifications,\x20please\x20go\x20to\x20chrome://settings/content/notifications,\x20find\x20this\x20site,\x20and\x20disable\x20notifications.','#333','display','porters-gc.firebasestorage.app','value','chat-input','contains','tagName','Message\x20deleted.','10GMLYok','position','8vXQtCS','div','username','entries','beforeunload','toLocaleString','color','23271WMmbTb','getItem','querySelector','\x20is\x20not\x20found.','clientY','border','offline','775662lKRtng','padding','11ROSiIV','messages','default','164wbEbkV','message','toDate','#ff5555','closest','location'];_0x31e2=function(){return _0x12023b;};return _0x31e2();}const firebaseConfig={'apiKey':_0x42da12(0x186),'authDomain':'porters-gc.firebaseapp.com','projectId':_0x42da12(0x19c),'storageBucket':_0x42da12(0x1a5),'messagingSenderId':'333509559336','appId':_0x42da12(0x18d)},app=initializeApp(firebaseConfig),db=getFirestore(app),chatMessages=document['getElementById']('chat-messages'),chatInput=document[_0x42da12(0x1dc)](_0x42da12(0x1a7)),sendBtn=document[_0x42da12(0x1dc)](_0x42da12(0x1dd)),username=localStorage['getItem'](_0x42da12(0x1af));!username&&(window[_0x42da12(0x1c5)][_0x42da12(0x19b)]=_0x42da12(0x18c));const messagesRef=collection(db,_0x42da12(0x1be)),q=query(messagesRef,orderBy(_0x42da12(0x1d9)));function requestNotificationPermission(){const _0x4b521a=_0x42da12;Notification[_0x4b521a(0x1ce)]===_0x4b521a(0x1bf)&&Notification[_0x4b521a(0x193)]()[_0x4b521a(0x1ca)](_0x5329a0=>{const _0x54afe7=_0x4b521a;_0x5329a0===_0x54afe7(0x180)?(console[_0x54afe7(0x173)](_0x54afe7(0x172)),!localStorage[_0x54afe7(0x1b5)](_0x54afe7(0x1e1))&&(alert(_0x54afe7(0x1a2)),localStorage['setItem'](_0x54afe7(0x1e1),_0x54afe7(0x17d)))):console['log'](_0x54afe7(0x1d7));});}function sendNotification(_0x1ba31e){const _0x53bdba=_0x42da12;Notification['permission']===_0x53bdba(0x180)&&new Notification(_0x1ba31e[_0x53bdba(0x1af)]+_0x53bdba(0x191),{'body':_0x1ba31e[_0x53bdba(0x179)],'icon':_0x53bdba(0x187)});}onSnapshot(q,_0x49b8c2=>{const _0x4e8213=_0x42da12;chatMessages[_0x4e8213(0x1cd)]='',_0x49b8c2[_0x4e8213(0x170)](_0x40ea94=>{const _0x4cb73e=_0x4e8213,_0x37c402=_0x40ea94[_0x4cb73e(0x18e)](),_0x2f83de=_0x40ea94['id'],_0x4dfeb4=_0x37c402['timestamp'][_0x4cb73e(0x1a1)](),_0x3aa396=document[_0x4cb73e(0x1d4)](_0x4cb73e(0x1ae)),_0x27b4fd=document[_0x4cb73e(0x1d4)](_0x4cb73e(0x19a));_0x27b4fd['textContent']=_0x37c402[_0x4cb73e(0x1af)],_0x27b4fd[_0x4cb73e(0x1db)][_0x4cb73e(0x1d6)](_0x4cb73e(0x1af)),_0x3aa396['appendChild'](_0x27b4fd);const _0x4365d5=document[_0x4cb73e(0x1d4)]('span');_0x4365d5[_0x4cb73e(0x17f)]=':\x20'+filterProfanity(_0x37c402[_0x4cb73e(0x179)]),_0x3aa396['appendChild'](_0x4365d5),_0x37c402[_0x4cb73e(0x1af)]===username?(_0x3aa396[_0x4cb73e(0x1db)][_0x4cb73e(0x1d6)](_0x4cb73e(0x188)),_0x3aa396['dataset'][_0x4cb73e(0x1d5)]=_0x2f83de):_0x3aa396[_0x4cb73e(0x1db)]['add'](_0x4cb73e(0x19e)),chatMessages[_0x4cb73e(0x1c6)](_0x3aa396),_0x37c402[_0x4cb73e(0x1af)]!==username&&sendNotification(_0x37c402);}),chatMessages['scrollTop']=chatMessages[_0x4e8213(0x17e)];}),chatMessages[_0x42da12(0x175)](_0x42da12(0x1e2),_0x5d38f4=>{const _0x3c7903=_0x42da12;_0x5d38f4[_0x3c7903(0x176)]();const _0x223b3d=document[_0x3c7903(0x1b6)](_0x3c7903(0x1d1));if(_0x223b3d)_0x223b3d[_0x3c7903(0x1c8)]();const _0x5455c0=_0x5d38f4['target'][_0x3c7903(0x1c4)]('.user-message');if(!_0x5455c0)return;const _0x45b4ca=document[_0x3c7903(0x1d4)](_0x3c7903(0x1ae));_0x45b4ca[_0x3c7903(0x1db)]['add'](_0x3c7903(0x1cf)),_0x45b4ca[_0x3c7903(0x195)][_0x3c7903(0x1ac)]=_0x3c7903(0x1da),_0x45b4ca[_0x3c7903(0x195)]['top']=_0x5d38f4[_0x3c7903(0x1b8)]+'px',_0x45b4ca[_0x3c7903(0x195)]['left']=_0x5d38f4[_0x3c7903(0x171)]+'px',_0x45b4ca[_0x3c7903(0x195)]['background']=_0x3c7903(0x1a3),_0x45b4ca[_0x3c7903(0x195)][_0x3c7903(0x1b3)]=_0x3c7903(0x1d0),_0x45b4ca[_0x3c7903(0x195)]['padding']=_0x3c7903(0x194),_0x45b4ca['style']['borderRadius']='5px',_0x45b4ca[_0x3c7903(0x195)][_0x3c7903(0x1df)]=_0x3c7903(0x183),_0x45b4ca[_0x3c7903(0x195)][_0x3c7903(0x192)]=_0x3c7903(0x1d8);const _0x44bf38=document['createElement']('button');_0x44bf38[_0x3c7903(0x17f)]=_0x3c7903(0x199),_0x44bf38[_0x3c7903(0x195)]['background']=_0x3c7903(0x1c3),_0x44bf38[_0x3c7903(0x195)]['color']=_0x3c7903(0x1d0),_0x44bf38['style'][_0x3c7903(0x1b9)]='none',_0x44bf38[_0x3c7903(0x195)][_0x3c7903(0x1bc)]=_0x3c7903(0x198),_0x44bf38[_0x3c7903(0x195)]['cursor']=_0x3c7903(0x1a0),_0x44bf38[_0x3c7903(0x195)][_0x3c7903(0x182)]=_0x3c7903(0x185),_0x45b4ca[_0x3c7903(0x1c6)](_0x44bf38),document['body']['appendChild'](_0x45b4ca),_0x44bf38[_0x3c7903(0x175)](_0x3c7903(0x18b),async()=>{const _0x318d8e=_0x3c7903,_0x1c9b4a=confirm(_0x318d8e(0x197));if(_0x1c9b4a){const _0x1ed406=_0x5455c0[_0x318d8e(0x18a)][_0x318d8e(0x1d5)];try{await deleteDoc(doc(db,'messages',_0x1ed406)),alert(_0x318d8e(0x1aa));}catch(_0x4885a2){console[_0x318d8e(0x181)](_0x318d8e(0x1cc),_0x4885a2[_0x318d8e(0x1c1)]),alert(_0x318d8e(0x1de)+_0x4885a2[_0x318d8e(0x1c1)]);}}_0x45b4ca[_0x318d8e(0x1c8)]();}),window[_0x3c7903(0x175)](_0x3c7903(0x18b),()=>{const _0x582b4f=_0x3c7903;_0x45b4ca[_0x582b4f(0x1c8)]();},{'once':!![]});}),sendBtn['addEventListener'](_0x42da12(0x18b),async()=>{const _0xfe900b=_0x42da12,_0x15e4de=chatInput[_0xfe900b(0x1a6)][_0xfe900b(0x190)]();if(_0x15e4de){const _0x2e225f=filterProfanity(_0x15e4de);await addDoc(messagesRef,{'username':username,'text':_0x2e225f,'timestamp':new Date()}),chatInput[_0xfe900b(0x1a6)]='';}});function updateUserStatus(_0x190e10,_0x1f5b29){const _0x324c98=_0x42da12,_0x4010e7=doc(db,'users',_0x190e10);setDoc(_0x4010e7,{'username':_0x190e10,'status':_0x1f5b29,'lastActive':_0x1f5b29===_0x324c98(0x1ba)?new Date():null},{'merge':!![]});}window[_0x42da12(0x175)](_0x42da12(0x1b1),()=>{const _0x1cd2c0=_0x42da12;updateUserStatus(username,_0x1cd2c0(0x1ba));});async function checkUserStatus(_0x4e86f3){const _0x3805cf=_0x42da12,_0x429b25=doc(db,_0x3805cf(0x1e0),_0x4e86f3),_0x14a3ce=await getDoc(_0x429b25),_0x4ff5d1=document[_0x3805cf(0x1dc)]('status-popup'),_0x59ff39=document[_0x3805cf(0x1dc)](_0x3805cf(0x189));if(_0x14a3ce[_0x3805cf(0x1d3)]()){const _0x2dcdb9=_0x14a3ce[_0x3805cf(0x18e)](),_0x50eb92=_0x2dcdb9['status']==='online'?_0x4e86f3+_0x3805cf(0x19d):_0x4e86f3+'\x20was\x20last\x20online\x20on\x20'+_0x2dcdb9['lastActive'][_0x3805cf(0x1c2)]()[_0x3805cf(0x1b2)]();_0x59ff39[_0x3805cf(0x17f)]=_0x50eb92;}else _0x59ff39[_0x3805cf(0x17f)]=_0x4e86f3+_0x3805cf(0x1b7);_0x4ff5d1[_0x3805cf(0x195)][_0x3805cf(0x1a4)]=_0x3805cf(0x18f);}document['getElementById'](_0x42da12(0x174))[_0x42da12(0x175)](_0x42da12(0x18b),()=>{const _0x59f6b2=_0x42da12;document[_0x59f6b2(0x1dc)](_0x59f6b2(0x19f))[_0x59f6b2(0x195)][_0x59f6b2(0x1a4)]=_0x59f6b2(0x17b);}),window['addEventListener'](_0x42da12(0x18b),_0x2db970=>{const _0x5654cb=_0x42da12,_0x2b1034=document[_0x5654cb(0x1dc)]('status-popup');_0x2db970[_0x5654cb(0x1c7)]===_0x2b1034&&(_0x2b1034[_0x5654cb(0x195)][_0x5654cb(0x1a4)]=_0x5654cb(0x17b));}),chatMessages[_0x42da12(0x175)](_0x42da12(0x18b),_0xa6d774=>{const _0x28865a=_0x42da12,_0x10fef5=_0xa6d774[_0x28865a(0x1c7)];if(_0x10fef5[_0x28865a(0x1a9)]===_0x28865a(0x1cb)&&_0x10fef5['classList'][_0x28865a(0x1a8)](_0x28865a(0x1af))){const _0x57eaa2=_0x10fef5[_0x28865a(0x17f)][_0x28865a(0x190)]();checkUserStatus(_0x57eaa2);}});let profanityFilter={};async function loadProfanityFilter(){const _0x41dfdb=_0x42da12;try{const _0x141668=await fetch(_0x41dfdb(0x17c));_0x141668['ok']?profanityFilter=await _0x141668['json']():console[_0x41dfdb(0x181)]('Failed\x20to\x20load\x20profanity\x20filter\x20JSON.');}catch(_0x48bfb0){console[_0x41dfdb(0x181)](_0x41dfdb(0x177),_0x48bfb0);}}function filterProfanity(_0x22de81){const _0xe576de=_0x42da12;let _0x62e57d=_0x22de81;for(const [_0x92ce18,_0x52a7b7]of Object[_0xe576de(0x1b0)](profanityFilter)){const _0x1790a3=new RegExp('\x5cb'+_0x92ce18+'\x5cb','gi');_0x62e57d=_0x62e57d['replace'](_0x1790a3,_0x52a7b7);}return _0x62e57d;}loadProfanityFilter(),requestNotificationPermission(),updateUserStatus(username,'online');