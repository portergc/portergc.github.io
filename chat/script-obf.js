const _0x50db4e=_0x2dda;function _0x2dda(_0x226499,_0x145db7){const _0x2d8486=_0x2d84();return _0x2dda=function(_0x2dda69,_0x3c475a){_0x2dda69=_0x2dda69-0x73;let _0x40565b=_0x2d8486[_0x2dda69];return _0x40565b;},_0x2dda(_0x226499,_0x145db7);}(function(_0x4b8419,_0x43c337){const _0x24d9f3=_0x2dda,_0x45811a=_0x4b8419();while(!![]){try{const _0x14456f=parseInt(_0x24d9f3(0x86))/0x1*(parseInt(_0x24d9f3(0x76))/0x2)+parseInt(_0x24d9f3(0x9d))/0x3*(-parseInt(_0x24d9f3(0xb1))/0x4)+-parseInt(_0x24d9f3(0x84))/0x5*(parseInt(_0x24d9f3(0x82))/0x6)+-parseInt(_0x24d9f3(0x75))/0x7+parseInt(_0x24d9f3(0x99))/0x8+parseInt(_0x24d9f3(0xa1))/0x9+parseInt(_0x24d9f3(0xba))/0xa*(parseInt(_0x24d9f3(0x7f))/0xb);if(_0x14456f===_0x43c337)break;else _0x45811a['push'](_0x45811a['shift']());}catch(_0x2e01ac){_0x45811a['push'](_0x45811a['shift']());}}}(_0x2d84,0xa0f7a));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js';import{getFirestore,collection,addDoc,onSnapshot,orderBy,query,setDoc,doc,getDoc}from'https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore.js';const firebaseConfig={'apiKey':_0x50db4e(0x7c),'authDomain':_0x50db4e(0x80),'projectId':'porters-gc','storageBucket':_0x50db4e(0x8e),'messagingSenderId':_0x50db4e(0xb0),'appId':_0x50db4e(0x7b)},app=initializeApp(firebaseConfig),db=getFirestore(app),chatMessages=document[_0x50db4e(0xb3)]('chat-messages'),chatInput=document[_0x50db4e(0xb3)]('chat-input'),sendBtn=document[_0x50db4e(0xb3)](_0x50db4e(0x92)),username=localStorage[_0x50db4e(0x81)]('username');!username&&(window[_0x50db4e(0x96)][_0x50db4e(0xaa)]=_0x50db4e(0xa6));const messagesRef=collection(db,_0x50db4e(0x79)),q=query(messagesRef,orderBy(_0x50db4e(0xb9)));function requestNotificationPermission(){const _0x5ad562=_0x50db4e;Notification[_0x5ad562(0xac)]===_0x5ad562(0x7a)&&Notification[_0x5ad562(0x9e)]()[_0x5ad562(0x8b)](_0x1a1879=>{const _0x1e71e3=_0x5ad562;_0x1a1879===_0x1e71e3(0x85)?(console[_0x1e71e3(0x74)](_0x1e71e3(0xb8)),!localStorage[_0x1e71e3(0x81)]('notificationAlertShown')&&(alert(_0x1e71e3(0xa3)),localStorage[_0x1e71e3(0x97)](_0x1e71e3(0x83),_0x1e71e3(0x9a)))):console['log']('Notification\x20permission\x20denied.');});}function sendNotification(_0x2517a2){const _0x37936f=_0x50db4e;Notification[_0x37936f(0xac)]==='granted'&&new Notification(_0x2517a2[_0x37936f(0x9f)]+_0x37936f(0x9b),{'body':_0x2517a2[_0x37936f(0x95)],'icon':_0x37936f(0xab)});}onSnapshot(q,_0x1bf8b2=>{const _0x173f14=_0x50db4e;chatMessages[_0x173f14(0x7e)]='',_0x1bf8b2[_0x173f14(0xb4)](_0x4f7066=>{const _0x126179=_0x173f14,_0x2c9273=_0x4f7066[_0x126179(0x7d)](),_0x816b23=_0x2c9273[_0x126179(0xb9)][_0x126179(0xa7)](),_0x1d4e8f=document['createElement'](_0x126179(0xbc)),_0x33d022=document['createElement']('span');_0x33d022[_0x126179(0xa9)]=_0x2c9273[_0x126179(0x9f)],_0x33d022['classList'][_0x126179(0x87)](_0x126179(0x9f)),_0x1d4e8f[_0x126179(0x78)](_0x33d022);const _0x15ac8e=document['createElement'](_0x126179(0x8c));_0x15ac8e[_0x126179(0xa9)]=':\x20'+_0x2c9273['text'],_0x1d4e8f['appendChild'](_0x15ac8e),_0x2c9273['username']===username?_0x1d4e8f['classList'][_0x126179(0x87)](_0x126179(0x77)):_0x1d4e8f[_0x126179(0xa4)][_0x126179(0x87)](_0x126179(0xa2)),chatMessages['appendChild'](_0x1d4e8f),_0x2c9273[_0x126179(0x9f)]!==username&&sendNotification(_0x2c9273);}),chatMessages[_0x173f14(0x8f)]=chatMessages['scrollHeight'];}),sendBtn[_0x50db4e(0xb7)](_0x50db4e(0x91),async()=>{const _0x4f25af=_0x50db4e,_0x2e78c7=chatInput['value'][_0x4f25af(0xa0)]();_0x2e78c7&&(await addDoc(messagesRef,{'username':username,'text':_0x2e78c7,'timestamp':new Date()}),chatInput[_0x4f25af(0x88)]='');});function updateUserStatus(_0x2b0035,_0x33a183){const _0x522078=_0x50db4e,_0x18f060=doc(db,'users',_0x2b0035);setDoc(_0x18f060,{'username':_0x2b0035,'status':_0x33a183,'lastActive':_0x33a183===_0x522078(0xbb)?new Date():null},{'merge':!![]});}window[_0x50db4e(0xb7)](_0x50db4e(0xb5),()=>{const _0x49c030=_0x50db4e;updateUserStatus(username,_0x49c030(0xbb));});async function checkUserStatus(_0x3ae3d1){const _0x5c5519=_0x50db4e,_0x5738b6=doc(db,_0x5c5519(0xad),_0x3ae3d1),_0xddcd2a=await getDoc(_0x5738b6),_0x1ce2a2=document['getElementById'](_0x5c5519(0x73)),_0x15d705=document[_0x5c5519(0xb3)](_0x5c5519(0xa8));if(_0xddcd2a[_0x5c5519(0x93)]()){const _0x3209dc=_0xddcd2a[_0x5c5519(0x7d)](),_0x2dbe15=_0x3209dc[_0x5c5519(0xae)]==='online'?_0x3ae3d1+_0x5c5519(0x90):_0x3ae3d1+_0x5c5519(0x98)+_0x3209dc[_0x5c5519(0xbd)]['toDate']()[_0x5c5519(0xaf)]();_0x15d705['textContent']=_0x2dbe15;}else _0x15d705[_0x5c5519(0xa9)]=_0x3ae3d1+'\x20is\x20not\x20found.';_0x1ce2a2[_0x5c5519(0x89)]['display']=_0x5c5519(0xb2);}document[_0x50db4e(0xb3)]('close-popup')[_0x50db4e(0xb7)]('click',()=>{const _0x504dbc=_0x50db4e;document['getElementById'](_0x504dbc(0x73))[_0x504dbc(0x89)][_0x504dbc(0x94)]=_0x504dbc(0xb6);}),window[_0x50db4e(0xb7)](_0x50db4e(0x91),_0x35720d=>{const _0xee7172=_0x50db4e,_0x1e24e5=document[_0xee7172(0xb3)]('status-popup');_0x35720d['target']===_0x1e24e5&&(_0x1e24e5[_0xee7172(0x89)][_0xee7172(0x94)]='none');}),chatMessages[_0x50db4e(0xb7)]('click',_0x24d890=>{const _0x314c7e=_0x50db4e,_0x46eccc=_0x24d890[_0x314c7e(0x8d)];if(_0x46eccc['tagName']===_0x314c7e(0x8a)&&_0x46eccc['classList'][_0x314c7e(0xa5)](_0x314c7e(0x9f))){const _0x3aa57b=_0x46eccc[_0x314c7e(0xa9)][_0x314c7e(0xa0)]();checkUserStatus(_0x3aa57b);}}),requestNotificationPermission(),updateUserStatus(username,_0x50db4e(0x9c));function _0x2d84(){const _0x53b652=['location','setItem','\x20was\x20last\x20online\x20on\x20','1327240NuGnoq','true','\x20sent\x20a\x20new\x20message!','online','187101rLVcWf','requestPermission','username','trim','4499982RuMofQ','other-message','Notifications\x20may\x20sometimes\x20cause\x20issues.\x20If\x20you\x20experience\x20problems\x20with\x20notifications,\x20please\x20go\x20to\x20chrome://settings/content/notifications,\x20find\x20this\x20site,\x20and\x20disable\x20notifications.','classList','contains','../','toMillis','status-message','textContent','href','../assets/icon.png','permission','users','status','toLocaleString','333509559336','28ytcwve','flex','getElementById','forEach','beforeunload','none','addEventListener','Notification\x20permission\x20granted.','timestamp','4420WfBRXI','offline','div','lastActive','status-popup','log','5589577gidhNL','34nIulPa','user-message','appendChild','messages','default','1:333509559336:web:1541f98d3eeaa6d3a1e11d','AIzaSyA9e5O-C0KvwIGZuZ6IFjoEKUwTW1Jl8o4','data','innerHTML','20966Kajzdj','porters-gc.firebaseapp.com','getItem','6jBWMch','notificationAlertShown','3640835WwIJbH','granted','65542VLGXgA','add','value','style','SPAN','then','span','target','porters-gc.firebasestorage.app','scrollTop','\x20is\x20currently\x20online','click','send-btn','exists','display','text'];_0x2d84=function(){return _0x53b652;};return _0x2d84();}